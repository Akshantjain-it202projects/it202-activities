// data from https://data.cityofchicago.org/resource/4ijn-s7e5.json?$LIMIT=10

let inspection_data = [{ "inspection_id": "2363101", "dba_name": "A & S FOOD", "aka_name": "A & S FOOD", "license_": "2713034", "facility_type": "Grocery Store", "risk": "Risk 2 (Medium)", "address": "2001 E 75TH ST ", "city": "CHICAGO", "state": "IL", "zip": "60649", "inspection_date": "2020-03-03T00:00:00.000", "inspection_type": "License", "results": "Pass w/ Conditions", "violations": "3. MANAGEMENT, FOOD EMPLOYEE AND CONDITIONAL EMPLOYEE; KNOWLEDGE, RESPONSIBILITIES AND REPORTING - Comments: OBSERVED NO EMPLOYEE HEALTH POLICY AVAILABLE. INSTRUCTED MANAGER TO PROVIDE IN A VERIFIABLE MANNER EMPLOYEE RESPONSIBILTIY TO REPORT ANY ILLNESS TRANSMISSIBLE THROUGH FOOD. PRIORITY FOUNDATION 7-38-010 | 5. PROCEDURES FOR RESPONDING TO VOMITING AND DIARRHEAL EVENTS - Comments: OBSERVED NO PROCEDURES AND SUPPLIES FOR RESPONDING TO VOMITING AND DIARRHEAL EVENTS. INSTRUCTED MANAGER TO PROVIDE CLEAN UP POLICY AND SUPPLIES. PRIORITY FOUNDATION 7-38-005 | 10. ADEQUATE HANDWASHING SINKS PROPERLY SUPPLIED AND ACCESSIBLE - Comments: OBSERVED NO HAND WASHING SIGNS AT HAND WASHING SINKS IN PREP AND WASHROOM AREAS. INSTRUCTED MANAGER TO PROVIDE HAND WASHING SIGNS AT ALL HAND WASHING SINKS USED BY EMPLOYEES.", "latitude": "41.75876735510478", "longitude": "-87.57607814804392", "location": { "latitude": "-87.57607814804392", "longitude": "41.75876735510478" } }
    , { "inspection_id": "2363135", "dba_name": "7-ELEVEN #39913A", "aka_name": "7-ELEVEN", "license_": "2708730", "facility_type": "Grocery Store", "risk": "Risk 2 (Medium)", "address": "11601 W TOUHY AVE ", "city": "CHICAGO", "state": "IL", "zip": "60666", "inspection_date": "2020-03-03T00:00:00.000", "inspection_type": "License", "results": "Fail", "violations": "3. MANAGEMENT, FOOD EMPLOYEE AND CONDITIONAL EMPLOYEE; KNOWLEDGE, RESPONSIBILITIES AND REPORTING - Comments: FOUND NO WRITTEN EMPLOYEE HEALTH POLICY ON THE PREMISES. MANAGEMENT INSTRUCTED TO PROVIDE A SIGNED EMPLOYEE HEALTH POLICY FOR EACH EMPLOYEE. PRIORITY FOUNDATION 7-38-010,NO CITATION ISSUED.  | 5. PROCEDURES FOR RESPONDING TO VOMITING AND DIARRHEAL EVENTS - Comments: FOUND NO PROCEDURE/PLAN FOR RESPONDING TO VOMITING AND DIARRHEAL EVENTS. INSTRUCTED TO PROVIDE AND MAINTAIN REQUIRED PROCEDURE/PLAN AND APPROPRIATE SUPPLIES OR KIT. (NECESSARY ITEMS AT A MINIMUM: GLOVES, FACE MASKS, DISPOSABLE MOPS AND APPROPRIATE SANITIZER/SPRAY THAT KILLS NOROVIRUS) PRIORITY FOUNDATION VIOLATION 7-38-005,NO CITATION ISSUED.  | 33. PROPER COOLING METHODS USED; ADEQUATE EQUIPMENT FOR TEMPERATURE CONTROL - Comments: EQUIPMENT NOT MAINTAINING PROPER TEMPERATURE. NOTED TEMPERATURE OF CHEST FREEZER LOCATED NEXT TO COFFEE STATION TO BE IMPROPER AT 65.9 F. INSTRUCTED NOT TO REPAIR AND MAINTAIN MENTIONED EQUIPMENT AT PROPER TEMPERATURE OF 0 F  AND BELOW. PRIORITY VIOLATION 7-38-005,NO CITATION ISSUED.  | 38. INSECTS, RODENTS, & ANIMALS NOT PRESENT - Comments: FOUND GAP 1/4 INCH MODE OF ENTRY AT BOTTOM CENTER OF MAIN ENTRANCE DOORS.MUST PEST PROOF MENTIONED DOORS TO PREVENT PEST ENTRY. | 51. PLUMBING INSTALLED; PROPER BACKFLOW DEVICES - Comments: BACK FLOW PREVENTION DEVICES MUST BE INSTALLED FOR EACH UNIT CONNECTED TO WATER SUPPLY LINES. MUST INSTALL SO BACK FLOW PREVENTION DEVICES MAY BE LOCATED TO BE SERVICED AND MAINTAINED. | 54. GARBAGE & REFUSE PROPERLY DISPOSED; FACILITIES MAINTAINED - Comments: FOUND NO OUTSIDE COMMERCIAL GARBAGE DUMPSTER FOR THE BUSINESS.INSTRUCTED TO PROVIDE AND MAINTAIN.PRIORITY FOUNDATION VIOLATION 7-38-020 (b),NO CITATION ISSUED.  | 57. ALL FOOD EMPLOYEES HAVE FOOD HANDLER TRAINING - Comments: FOUND NO FOOD HANDLING CERTIFICATE FOR FOOD HANDLERS ON SITE. INSTRUCTED MANAGER TO PROVIDE FOOD HANDLER CERTIFICATE FOR ALL FOOD HANDLERS. -", "latitude": "42.008536400868735", "longitude": "-87.91442843927047", "location": { "latitude": "-87.91442843927047", "longitude": "42.008536400868735" } }
    , { "inspection_id": "2363131", "dba_name": "POPEYE'S CHICKEN & BISCUITS", "aka_name": "POPEYE'S", "license_": "1622615", "facility_type": "Restaurant", "risk": "Risk 1 (High)", "address": "3352 W LAWRENCE AVE ", "city": "CHICAGO", "state": "IL", "zip": "60625", "inspection_date": "2020-03-03T00:00:00.000", "inspection_type": "Canvass", "results": "Pass w/ Conditions", "violations": "23. PROPER DATE MARKING AND DISPOSITION - Comments: OBSERVED READY TO EAT, TEMPERATURE CONTROL FOR SAFETY FOODS (CHICKEN, MARINATED CHICKEN)NOT PROPERLY DATED , STORED LONGER THAN 24 HOURS IN COOLERS. INSTRUCTED TO PROVIDE PROPER DATE MARKING WITH DISPOSITION DATE FOR RTE FOODS PREPARED ON SITE AND HELD OVER 24 HOURS IN COLD HOLDING UNIT. PRIORITY FOUNDATION VIOLATION. NO CITATION ISSUED. 7-38-005 | 49. NON-FOOD/FOOD CONTACT SURFACES CLEAN - Comments: OBSERVED BLACK SLIMY SUBSTANCE BUILD ON CAULKING OVER 3 COMPARTMENT SINK UNDER CHEMICAL DISPENSERS. MUST CLEAN AND MAINTAIN CLEAN | 56. ADEQUATE VENTILATION & LIGHTING; DESIGNATED AREAS USED - Comments: MUST CLEAN AND MAINTAIN CLEAN CEILING AIR VENTS | 56. ADEQUATE VENTILATION & LIGHTING; DESIGNATED AREAS USED - Comments: MUST PROVIDE PROTECTED OR SHATTER PROOF LIGHT BULBS OVER FRONT SERVICE COUNTER | 57. ALL FOOD EMPLOYEES HAVE FOOD HANDLER TRAINING - Comments: OBSERVED FOOD HANDLER'S TRAINING CERTIFICATION FROM 11 EMPLOYEE.FACILITY TOTAL EMPLOYEE NUMBER IS 21 AT TIME OF INSPECTION . INSTRUCTED THAT ALL EMPLOYEE'S MUST COMPLY WITH FOOD HANDLER'S TRAINING IN ACCORDANCE WITH THE FOOD HANDLING REGULATION ENFORCEMENT ACT.", "latitude": "41.96851294147588", "longitude": "-87.71305126719813", "location": { "latitude": "-87.71305126719813", "longitude": "41.96851294147588" } }
    , { "inspection_id": "2363110", "dba_name": "CHIQUEOLATTE", "aka_name": "CHIQUEOLATTE", "license_": "2712594", "facility_type": "Restaurant", "risk": "Risk 2 (Medium)", "address": "2643 N MILWAUKEE AVE ", "city": "CHICAGO", "state": "IL", "zip": "60647", "inspection_date": "2020-03-03T00:00:00.000", "inspection_type": "License Re-Inspection", "results": "Pass w/ Conditions", "violations": "3. MANAGEMENT, FOOD EMPLOYEE AND CONDITIONAL EMPLOYEE; KNOWLEDGE, RESPONSIBILITIES AND REPORTING - Comments: 2-102.14(O)  OBSERVED NO WRITTEN EMPLOYEE HEALTH POLICY ON THE PREMISES. MANAGEMENT INSTRUCTED TO PROVIDE A SIGNED EMPLOYEE HEALTH POLICY FOR EACH EMPLOYEE. PRIORITY FOUNDATION 7-38-010. NO CITATION ISSUED. | 5. PROCEDURES FOR RESPONDING TO VOMITING AND DIARRHEAL EVENTS - Comments: 2-501.11  OBSERVED NO CLEAN UP PROCEDURE OR SUPPLIES ON THE PREMISES TO RESPOND TO VOMIT AND DIARRHEAL EVENTS. MUST PROVIDE BOTH. PRIORITY FOUNDATION 7-38-005. NO CITATION ISSUED. | 54. GARBAGE & REFUSE PROPERLY DISPOSED; FACILITIES MAINTAINED - Comments: 5-501.16  NO WASTE RECEPTACLES WERE PROVIDED AT ANY OF THE HAND WASHING SINKS. MUST PROVIDE A WASTE RECEPTACLE AT ALL HAND WASHING SINKS.  | 55. PHYSICAL FACILITIES INSTALLED, MAINTAINED & CLEAN - Comments: 6-501.12  CLEAN THE WALLS OF THE CLOSET AROUND THE MOP SINK.", "latitude": "41.92986822883653", "longitude": "-87.70848377951259", "location": { "latitude": "-87.70848377951259", "longitude": "41.92986822883653" } }
    , { "inspection_id": "2363149", "dba_name": "AMIGOS SALUDABLES", "aka_name": "AMIGOS SALUDABLES", "license_": "2717775", "facility_type": "Restaurant", "risk": "All", "address": "4001 W FULLERTON AVE ", "city": "CHICAGO", "state": "IL", "zip": "60639", "inspection_date": "2020-03-03T00:00:00.000", "inspection_type": "License", "results": "Not Ready", "latitude": "41.92437352872389", "longitude": "-87.72681367807314", "location": { "latitude": "-87.72681367807314", "longitude": "41.92437352872389" } }
    , { "inspection_id": "2363099", "dba_name": "ARAMARK EDUCATIONAL SERVICES", "aka_name": "CICS LOOMIS PRIMARY", "license_": "2646463", "facility_type": "CHARTER SCHOOL", "risk": "Risk 1 (High)", "address": "9535 S LOOMIS ", "city": "CHICAGO", "state": "IL", "zip": "60643", "inspection_date": "2020-03-03T00:00:00.000", "inspection_type": "Canvass Re-Inspection", "results": "Pass", "latitude": "41.72025066493471", "longitude": "-87.65752453407546", "location": { "latitude": "-87.65752453407546", "longitude": "41.72025066493471" } }
    , { "inspection_id": "2363109", "dba_name": "TEN CAFE", "aka_name": "TEN CAFE", "license_": "2713537", "facility_type": "Restaurant", "risk": "Risk 1 (High)", "address": "3308 N WESTERN AVE ", "city": "CHICAGO", "state": "IL", "zip": "60618", "inspection_date": "2020-03-03T00:00:00.000", "inspection_type": "License Re-Inspection", "results": "Pass", "latitude": "41.94158571345376", "longitude": "-87.68837619919587", "location": { "latitude": "-87.68837619919587", "longitude": "41.94158571345376" } }
    , { "inspection_id": "2363157", "dba_name": "MIDTOWN ATHLETIC CLUB AND HOTEL", "aka_name": "MIDTOWN ATHLETIC CLUB AND HOTEL", "license_": "2535330", "facility_type": "Restaurant", "risk": "Risk 1 (High)", "address": "2444 N ELSTON AVE ", "city": "CHICAGO", "state": "IL", "zip": "60647", "inspection_date": "2020-03-03T00:00:00.000", "inspection_type": "Complaint", "results": "Pass w/ Conditions", "violations": "16. FOOD-CONTACT SURFACES: CLEANED & SANITIZED - Comments: NO SANITIZER WAS DETECTED AT THE LOW TEMPERATURE DISH MACHINE AT THE JUICE BAR AREA.  THE DISH MACHINE HAD GLASS CONTAINERS INSIDE THAT WERE BEING WASHED.   MANAGEMENT INSTRUCTED TO REPAIR AND MAINTAIN THE MACHINE WITH A FINAL RINSE OF 100 PPM CHLORINE.  PRIORITY 7-38-025.  CITATION ISSUED. | 48. WAREWASHING FACILITIES: INSTALLED, MAINTAINED & USED; TEST STRIPS - Comments: OBSERVED NO IRREVERSIBLE REGISTERING TEMPERATURE INDICATORS PROVIDED FOR THE HIGH TEMPERATURE DISH MACHINE TO MEASURE THE SURFACE TEMPERATURE OF UTENSILS.  MANAGEMENT INSTRUCTED TO PROVIDE.  PRIORITY FOUNDATION 7-38-005.  NO CITATION ISSUED. | 57. ALL FOOD EMPLOYEES HAVE FOOD HANDLER TRAINING - Comments: OBSERVED A FOOD HANDLING EMPLOYEE WITHOUT A VALID FOOD HANDLER CERTIFICATE.  MANAGEMENT INSTRUCTED THAT ALL FOOD HANDLING EMPLOYEES MUST HAVE A VALID FOOD HANDLER CERTIFICATE ONSITE. | 58. ALLERGEN TRAINING AS REQUIRED - Comments: OBSERVED A CERTIFIED FOOD MANAGER WITHOUT AN ALLERGEN TRAINING CERTIFICATE.  MANAGEMENT INSTRUCTED THAT ALL CERTIFIED FOOD MANAGERS MUST SHOW PROOF OF TRAINING.", "latitude": "41.925845287841526", "longitude": "-87.67883572432687", "location": { "latitude": "-87.67883572432687", "longitude": "41.925845287841526" } }
    , { "inspection_id": "2363146", "dba_name": "YIMMIES BRUNCH", "aka_name": "YIMMIES BRUNCH", "license_": "2703575", "facility_type": "Restaurant", "risk": "Risk 1 (High)", "address": "5800 D N LINCOLN AVE ", "city": "CHICAGO", "state": "IL", "zip": "60659", "inspection_date": "2020-03-03T00:00:00.000", "inspection_type": "Complaint", "results": "No Entry", "latitude": "41.98676162461309", "longitude": "-87.70151851461625", "location": { "latitude": "-87.70151851461625", "longitude": "41.98676162461309" } }
    , { "inspection_id": "2363103", "dba_name": "GOLDEN GRAIN BAKERY AND DONUTS CORPORATION", "aka_name": "GOLDEN GRAIN BAKERY/CAFE", "license_": "2288717", "facility_type": "Restaurant", "risk": "Risk 1 (High)", "address": "3342 W LAWRENCE AVE ", "city": "CHICAGO", "state": "IL", "zip": "60625", "inspection_date": "2020-03-03T00:00:00.000", "inspection_type": "Canvass Re-Inspection", "results": "Pass", "violations": "37. FOOD PROPERLY LABELED; ORIGINAL CONTAINER - Comments: OBSERVED SEVERAL LARGE FOOD CONTAINERS WITH DRY PRODUCTS.(RICE , SALT SUGAR) WITH OUT PROPER COMMON FOOD NAME MARKINGS.ALL BULK AND WORKING FOOD INGREDIENT CONTAINERS MUST BE LABELED WITH CONTENTS NAME.MUST LABEL FOOD STORAGE CONTAINERS WHEN FOOD IS NOT IN ORIGINAL PACKAGE. | 47. FOOD & NON-FOOD CONTACT SURFACES CLEANABLE, PROPERLY DESIGNED, CONSTRUCTED & USED - Comments: OBSERVED TORN RUBBER GASKET ON DOOR TO REACH IN TWO DOOR COOLER IN REAR PREP AREA. INSTRUCTED TO REPAIR WITH PROPER PARTS AND NOT TO USE DUCK TAPE FOR REPAIRS AND MAINTAIN | 53. TOILET FACILITIES: PROPERLY CONSTRUCTED, SUPPLIED, & CLEANED - Comments: MUST PROVIDE TOILET ROOM RECEPTACLE WITH COVER FOR SANITARY NAPKINS IN EMPLOYEES BATHROOM", "latitude": "41.968518497633795", "longitude": "-87.71263165748292", "location": { "latitude": "-87.71263165748292", "longitude": "41.968518497633795" } }]

// console.log(inspection_data);

var map;
var loc;

function initMap() {
    loc = {lat: parseFloat(inspection_data[0].latitude), lng: parseFloat(inspection_data[0].longitude)};

    map = new google.maps.Map(document.getElementById('map'), {
        zoom: 9, center: loc, mapTypeId: 'terrain'
    });

    var infoWindow = new google.maps.InfoWindow();

    for (let i=0; i<inspection_data.length; ++i)    {
        let obj = inspection_data[i];
        var latLng = new google.maps.LatLng(this.parseFloat(obj.latitude), this.parseFloat(obj.longitude));
        
            
        var marker = new google.maps.Marker({
            position: latLng,
            map: map,
            title: obj.aka_name
        });

        (function (marker, obj) {
            google.maps.event.addListener(marker, "click", function (e) {
                var content = '<h4>' + obj.dba_name + '</h4>' +
                    '<p><b>Facility Type</b>: ' + obj.facility_type + '</p>' +
                    '<p><b>Address</b>: ' + obj.address + '</p>' +
                    '<p><b>Inspection Date</b>: ' + obj.inspection_date.split("T", 1) + '</p>' +
                    '<p><b>Result</b>: ' + obj.results + '</p>';
                infoWindow.setContent(content);
                infoWindow.open(map, marker);
            });
        })(marker, obj);

    }
}